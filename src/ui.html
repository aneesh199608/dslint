<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Token Check</title>
    <style>
      :root {
        font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
        color: #1e1e1e;
        background: #ffffff;
      }
      body {
        margin: 0;
        padding: 16px;
        background: #ffffff;
      }
      body.is-empty {
        background: #ffffff;
      }
      body.is-loading {
        background: #ffffff;
      }
      .top-bar {
        display: flex;
        flex-direction: column;
        gap: 8px;
        margin-bottom: 12px;
        padding: 12px;
        border: 2px solid #383838;
        border-radius: 8px;
        background: #ffffff;
      }
      .header-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 12px;
      }
      .header-title {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        font-size: 16px;
        font-weight: 600;
        color: #1e1e1e;
      }
      .header-title h2 {
        margin: 0;
        font-size: inherit;
        font-weight: inherit;
      }
      .header-title-icon {
        width: 16px;
        height: 16px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
      }
      .header-title-icon.is-hidden {
        display: none;
      }
      .status-spinner-ring {
        width: 16px;
        height: 16px;
        border: 2px solid rgba(2, 84, 45, 0.25);
        border-top-color: #02542d;
        border-radius: 50%;
        box-sizing: border-box;
        animation: spin 0.9s linear infinite;
      }
      .header-controls {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        flex-wrap: nowrap;
      }
      .select-control {
        border: 1px solid #d9d9d9;
        border-radius: 8px;
        padding: 4px 24px 4px 8px;
        height: 24px;
        font-size: 12px;
        font-weight: 400;
        color: #1e1e1e;
        background: #ffffff;
        line-height: 12px;
        appearance: none;
        background-image: url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M4 6L8 10L12 6' stroke='%231E1E1E' stroke-width='1.6' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 4px center;
        background-size: 16px 16px;
      }
      .control-button {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        border: 1px solid #cbd5e1;
        background: #ffffff;
        border-radius: 8px;
        padding: 6px 8px;
        height: 24px;
        font-size: 12px;
        color: #0f172a;
        cursor: pointer;
        box-shadow: 0 1px 2px rgba(15, 23, 42, 0.06);
        line-height: 1;
        transition: background 120ms ease, border-color 120ms ease, box-shadow 120ms ease;
      }
      .control-button:not(:disabled):hover {
        background: #f8fafc;
        border-color: #94a3b8;
      }
      .control-button svg {
        width: 12px;
        height: 12px;
      }
      .control-button img {
        width: 12px;
        height: 12px;
        display: block;
      }
      .filter-menu {
        position: relative;
      }
      .filter-menu summary {
        list-style: none;
      }
      .filter-menu summary::-webkit-details-marker {
        display: none;
      }
      .filter-icon-button {
        border: 1px solid #cbd5e1;
        background: #ffffff;
        border-radius: 8px;
        width: 24px;
        height: 24px;
        cursor: pointer;
        padding: 5px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 1px 2px rgba(15, 23, 42, 0.06);
        box-sizing: border-box;
        transition: background 120ms ease, border-color 120ms ease, box-shadow 120ms ease;
      }
      .filter-icon-button:hover {
        background: #f8fafc;
        border-color: #94a3b8;
      }
      .filter-icon-button svg {
        width: 12px;
        height: 12px;
      }
      .filter-menu-content {
        position: absolute;
        right: 0;
        top: calc(100% + 6px);
        background: #ffffff;
        border: 1px solid #e4e4e7;
        border-radius: 8px;
        padding: 8px;
        min-width: 180px;
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
        z-index: 2;
        display: flex;
        flex-direction: column;
        gap: 8px;
      }
      .filter-menu:not([open]) .filter-menu-content {
        display: none;
      }
      .filter-menu-label {
        display: flex;
        flex-direction: column;
        gap: 4px;
        font-size: 11px;
        color: #475569;
      }
      .filter-menu-select {
        border: 1px solid #d9d9d9;
        border-radius: 6px;
        padding: 4px 6px;
        height: 24px;
        font-size: 12px;
        color: #1e1e1e;
        background: #ffffff;
      }
      .summary-row {
        display: flex;
        align-items: center;
        gap: 8px;
        flex-wrap: nowrap;
      }
      .summary-pill {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 12px;
        color: #000000;
      }
      .summary-pill span {
        font-weight: 600;
      }
      .summary-pill.applied {
        background: #ebffee;
      }
      .summary-pill.missing {
        background: #fee9e7;
      }
      .summary-pill.unsupported {
        background: #fffbeb;
      }
      .filter-bar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        padding: 8px 12px;
        border-radius: 8px;
        background: #f5f6fe;
        flex-wrap: nowrap;
      }
      .filter-options {
        display: flex;
        align-items: center;
        gap: 12px;
        flex-wrap: nowrap;
        flex: 1;
      }
      .filter-option {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        font-size: 12px;
        color: #1e1e1e;
      }
      .filter-option input {
        appearance: none;
        width: 12px;
        height: 12px;
        border-radius: 3px;
        border: 1px solid #2c2c2c;
        background: #2c2c2c;
        display: grid;
        place-content: center;
        margin: 0;
      }
      .filter-option input::after {
        content: "";
        width: 6px;
        height: 3px;
        border-left: 2px solid #f5f5f5;
        border-bottom: 2px solid #f5f5f5;
        transform: rotate(-45deg);
        opacity: 0;
      }
      .filter-option input:checked::after {
        opacity: 1;
      }
      .apply-button {
        border: none;
        background: #000000;
        color: #f5f5f5;
        border-radius: 8px;
        padding: 6px 16px;
        font-size: 12px;
        font-weight: 500;
        cursor: pointer;
        height: 28px;
        white-space: nowrap;
        flex-shrink: 0;
      }
      .apply-button:disabled {
        opacity: 0.7;
        cursor: default;
      }
      .status-message {
        font-size: 12px;
        color: #475569;
      }
      .status-message.is-hidden {
        display: none;
      }
      .row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
        border: 1px solid #e2e8f0;
        border-radius: 8px;
        padding: 10px 12px;
        margin-top: 8px;
      }
      .layer-card {
        display: flex;
        flex-direction: column;
        gap: 10px;
        border: 1px solid #e2e8f0;
        border-radius: 12px;
        padding: 12px;
        margin-top: 8px;
        background: #ffffff;
        box-shadow: 0 1px 2px rgba(15, 23, 42, 0.06);
      }
      .layer-card__header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
      }
      .layer-card__title {
        font-weight: 600;
        font-size: 14px;
        color: #0f172a;
      }
      .layer-card__actions {
        display: inline-flex;
        align-items: center;
        gap: 6px;
      }
      .layer-button {
        border: 1px solid #cbd5e1;
        background: #ffffff;
        border-radius: 8px;
        padding: 4px 12px;
        font-size: 12px;
        color: #0f172a;
        cursor: pointer;
        transition: background 120ms ease, border-color 120ms ease, box-shadow 120ms ease;
        white-space: nowrap;
        box-shadow: 0 1px 2px rgba(15, 23, 42, 0.06);
      }
      .layer-button:disabled {
        opacity: 0.5;
        cursor: default;
        box-shadow: none;
      }
      .layer-button:not(:disabled):hover {
        background: #f8fafc;
        border-color: #94a3b8;
      }
      .layer-button--icon {
        padding: 6px;
        border-radius: 8px;
        min-width: 28px;
        height: 24px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
      }
      .layer-card__body {
        display: flex;
        flex-direction: column;
        gap: 6px;
      }
      .layer-card.is-collapsed .layer-card__body {
        display: none;
      }
      .layer-status {
        font-size: 12px;
      }
      .layer-status--missing {
        font-weight: 600;
      }
      .layer-card__buttons {
        display: flex;
        align-items: center;
        gap: 6px;
        flex-wrap: wrap;
        margin-top: 6px;
      }
      .layer-card__toggle svg {
        transition: transform 150ms ease;
      }
      .layer-card.is-collapsed .layer-card__toggle svg {
        transform: rotate(180deg);
      }
      .primary-button {
        border: none;
        background: linear-gradient(135deg, #4f46e5, #6366f1);
        color: white;
        border-radius: 8px;
        padding: 10px 14px;
        font-size: 13px;
        cursor: pointer;
        box-shadow: 0 6px 12px rgba(99, 102, 241, 0.2);
        transition: transform 120ms ease, box-shadow 120ms ease;
      }
      .primary-button:hover {
        box-shadow: 0 8px 16px rgba(99, 102, 241, 0.25);
        transform: translateY(-1px);
      }
      .primary-button:active {
        transform: translateY(0);
        box-shadow: 0 4px 10px rgba(99, 102, 241, 0.2);
      }
      p {
        margin: 0;
        color: #475569;
        font-size: 13px;
      }
      .start-screen {
        display: none;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 16px;
        padding: 16px;
        border-radius: 8px;
        min-height: calc(100vh - 32px);
        box-sizing: border-box;
      }
      .start-title {
        font-size: 16px;
        line-height: 1.4;
        font-weight: 400;
        color: #1e1e1e;
        text-align: center;
      }
      .start-picture {
        width: 292px;
        height: 155px;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .start-button {
        border: none;
        background: #000000;
        color: #f5f5f5;
        border-radius: 8px;
        padding: 12px 16px;
        font-size: 12px;
        font-weight: 700;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        cursor: pointer;
      }
      .start-button:disabled {
        cursor: default;
        opacity: 0.85;
      }
      .start-button-icon-slot {
        width: 16px;
        height: 16px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
      }
      .start-button-icon,
      .start-button-spinner {
        width: 16px;
        height: 16px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
      }
      .start-button-spinner {
        display: none;
      }
      .start-button.is-loading .start-button-icon {
        display: none;
      }
      .start-button.is-loading .start-button-spinner {
        display: inline-flex;
      }
      .start-spinner {
        width: 16px;
        height: 16px;
        border: 2px solid rgba(245, 245, 245, 0.35);
        border-top-color: #f5f5f5;
        border-radius: 50%;
        box-sizing: border-box;
        animation: spin 0.9s linear infinite;
      }
      body.is-empty .top-bar,
      body.is-empty .card,
      body.is-empty #dark-note,
      body.is-empty #library-note,
      body.is-empty #list {
        display: none;
      }
      body.is-empty .start-screen {
        display: flex;
      }
      .loading-screen {
        display: none;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 16px;
        padding: 16px;
        border-radius: 8px;
        min-height: calc(100vh - 32px);
        box-sizing: border-box;
        text-align: center;
      }
      .loading-title {
        font-size: 16px;
        line-height: 1.4;
        font-weight: 400;
        color: #1e1e1e;
      }
      .loading-title-strong {
        font-weight: 700;
      }
      body.is-loading .top-bar,
      body.is-loading .card,
      body.is-loading #dark-note,
      body.is-loading #library-note,
      body.is-loading #list,
      body.is-loading .start-screen {
        display: none;
      }
      body.is-loading .loading-screen {
        display: flex;
      }
      @keyframes spin {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }
    </style>
  </head>
  <body class="is-empty">
    <div id="start-screen" class="start-screen" aria-hidden="true">
      <div id="start-title" class="start-title">
        Select a <span class="loading-title-strong">Layer</span> or <span class="loading-title-strong">Frame</span> to inspect
      </div>
      <div class="start-picture" aria-hidden="true">
        <svg width="292" height="155" viewBox="0 0 292 155" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g filter="url(#filter0_d_3009_1322)">
        <path d="M78.8168 67.8643L75.6631 51.6145L90.143 59.6353L83.0104 61.7272L78.8168 67.8643Z" fill="black"/>
        <path d="M78.8168 67.8643L75.6631 51.6145L90.143 59.6353L83.0104 61.7272L78.8168 67.8643Z" stroke="white"/>
        </g>
        <g filter="url(#filter1_d_3009_1322)">
        <path d="M88 69.5C88 68.3954 88.8954 67.5 90 67.5H202C213.046 67.5 222 76.4543 222 87.5C222 98.5457 213.046 107.5 202 107.5H112C98.7452 107.5 88 96.7548 88 83.5V69.5Z" fill="#6A7796" shape-rendering="crispEdges"/>
        <path d="M90 68.5H202C212.493 68.5 221 77.0066 221 87.5C221 97.9934 212.493 106.5 202 106.5H112C99.2975 106.5 89 96.2025 89 83.5V69.5C89 68.9477 89.4477 68.5 90 68.5Z" stroke="#555F78" stroke-width="2" shape-rendering="crispEdges"/>
        <path d="M107.682 93.6932C107.129 93.6932 106.629 93.5909 106.182 93.3864C105.735 93.178 105.381 92.8769 105.119 92.483C104.862 92.089 104.733 91.6061 104.733 91.0341C104.733 90.5417 104.828 90.1364 105.017 89.8182C105.206 89.5 105.462 89.2481 105.784 89.0625C106.106 88.8769 106.466 88.7367 106.864 88.642C107.261 88.5473 107.667 88.4754 108.08 88.4261C108.602 88.3655 109.027 88.3163 109.352 88.2784C109.678 88.2367 109.915 88.1705 110.062 88.0795C110.21 87.9886 110.284 87.8409 110.284 87.6364V87.5966C110.284 87.1004 110.144 86.7159 109.864 86.4432C109.587 86.1705 109.174 86.0341 108.625 86.0341C108.053 86.0341 107.602 86.161 107.273 86.4148C106.947 86.6648 106.722 86.9432 106.597 87.25L105 86.8864C105.189 86.3561 105.466 85.928 105.83 85.6023C106.197 85.2727 106.619 85.0341 107.097 84.8864C107.574 84.7348 108.076 84.6591 108.602 84.6591C108.951 84.6591 109.32 84.7008 109.71 84.7841C110.104 84.8636 110.472 85.0114 110.812 85.2273C111.157 85.4432 111.439 85.7519 111.659 86.1534C111.879 86.5511 111.989 87.0682 111.989 87.7045V93.5H110.33V92.3068H110.261C110.152 92.5265 109.987 92.7424 109.767 92.9545C109.547 93.1667 109.265 93.3428 108.92 93.483C108.576 93.6231 108.163 93.6932 107.682 93.6932ZM108.051 92.3295C108.521 92.3295 108.922 92.2367 109.256 92.0511C109.593 91.8655 109.848 91.6231 110.023 91.3239C110.201 91.0208 110.29 90.697 110.29 90.3523V89.2273C110.229 89.2879 110.112 89.3447 109.938 89.3977C109.767 89.447 109.572 89.4905 109.352 89.5284C109.133 89.5625 108.919 89.5947 108.71 89.625C108.502 89.6515 108.328 89.6742 108.188 89.6932C107.858 89.7348 107.557 89.8049 107.284 89.9034C107.015 90.0019 106.799 90.1439 106.636 90.3295C106.477 90.5114 106.398 90.7538 106.398 91.0568C106.398 91.4773 106.553 91.7955 106.864 92.0114C107.174 92.2235 107.57 92.3295 108.051 92.3295ZM114.251 96.7727V84.7727H115.911V86.1875H116.053C116.151 86.0057 116.293 85.7955 116.479 85.5568C116.664 85.3182 116.922 85.1098 117.251 84.9318C117.581 84.75 118.017 84.6591 118.558 84.6591C119.263 84.6591 119.892 84.8371 120.445 85.1932C120.998 85.5492 121.431 86.0625 121.746 86.733C122.064 87.4034 122.223 88.2102 122.223 89.1534C122.223 90.0966 122.066 90.9053 121.751 91.5795C121.437 92.25 121.005 92.767 120.456 93.1307C119.907 93.4905 119.28 93.6705 118.575 93.6705C118.045 93.6705 117.611 93.5814 117.274 93.4034C116.941 93.2254 116.679 93.017 116.49 92.7784C116.301 92.5398 116.155 92.3277 116.053 92.142H115.95V96.7727H114.251ZM115.916 89.1364C115.916 89.75 116.005 90.2879 116.183 90.75C116.361 91.2121 116.619 91.5739 116.956 91.8352C117.293 92.0928 117.706 92.2216 118.195 92.2216C118.702 92.2216 119.126 92.0871 119.467 91.8182C119.808 91.5455 120.066 91.1761 120.24 90.7102C120.418 90.2443 120.507 89.7197 120.507 89.1364C120.507 88.5606 120.42 88.0436 120.246 87.5852C120.075 87.1269 119.818 86.7652 119.473 86.5C119.132 86.2348 118.706 86.1023 118.195 86.1023C117.702 86.1023 117.286 86.2292 116.945 86.483C116.607 86.7367 116.352 87.0909 116.178 87.5455C116.003 88 115.916 88.5303 115.916 89.1364ZM124.126 96.7727V84.7727H125.786V86.1875H125.928C126.026 86.0057 126.168 85.7955 126.354 85.5568C126.539 85.3182 126.797 85.1098 127.126 84.9318C127.456 84.75 127.892 84.6591 128.433 84.6591C129.138 84.6591 129.767 84.8371 130.32 85.1932C130.873 85.5492 131.306 86.0625 131.621 86.733C131.939 87.4034 132.098 88.2102 132.098 89.1534C132.098 90.0966 131.941 90.9053 131.626 91.5795C131.312 92.25 130.88 92.767 130.331 93.1307C129.782 93.4905 129.155 93.6705 128.45 93.6705C127.92 93.6705 127.486 93.5814 127.149 93.4034C126.816 93.2254 126.554 93.017 126.365 92.7784C126.176 92.5398 126.03 92.3277 125.928 92.142H125.825V96.7727H124.126ZM125.791 89.1364C125.791 89.75 125.88 90.2879 126.058 90.75C126.236 91.2121 126.494 91.5739 126.831 91.8352C127.168 92.0928 127.581 92.2216 128.07 92.2216C128.577 92.2216 129.001 92.0871 129.342 91.8182C129.683 91.5455 129.941 91.1761 130.115 90.7102C130.293 90.2443 130.382 89.7197 130.382 89.1364C130.382 88.5606 130.295 88.0436 130.121 87.5852C129.95 87.1269 129.693 86.7652 129.348 86.5C129.007 86.2348 128.581 86.1023 128.07 86.1023C127.577 86.1023 127.161 86.2292 126.82 86.483C126.482 86.7367 126.227 87.0909 126.053 87.5455C125.878 88 125.791 88.5303 125.791 89.1364ZM135.7 81.8636V93.5H134.001V81.8636H135.7ZM139.06 96.7727C138.806 96.7727 138.575 96.7519 138.366 96.7102C138.158 96.6723 138.003 96.6307 137.901 96.5852L138.31 95.1932C138.62 95.2765 138.897 95.3125 139.139 95.3011C139.382 95.2898 139.596 95.1989 139.781 95.0284C139.971 94.858 140.137 94.5795 140.281 94.1932L140.491 93.6136L137.298 84.7727H139.116L141.327 91.5455H141.418L143.628 84.7727H145.452L141.855 94.6648C141.688 95.1193 141.476 95.5038 141.219 95.8182C140.961 96.1364 140.654 96.375 140.298 96.5341C139.942 96.6932 139.529 96.7727 139.06 96.7727ZM155.357 84.7727V86.1364H150.589V84.7727H155.357ZM151.868 82.6818H153.567V90.9375C153.567 91.267 153.616 91.5152 153.714 91.6818C153.813 91.8447 153.94 91.9564 154.095 92.017C154.254 92.0739 154.427 92.1023 154.612 92.1023C154.749 92.1023 154.868 92.0928 154.97 92.0739C155.072 92.0549 155.152 92.0398 155.209 92.0284L155.516 93.4318C155.417 93.4697 155.277 93.5076 155.095 93.5455C154.913 93.5871 154.686 93.6098 154.413 93.6136C153.966 93.6212 153.55 93.5417 153.163 93.375C152.777 93.2083 152.464 92.9508 152.226 92.6023C151.987 92.2538 151.868 91.8163 151.868 91.2898V82.6818ZM160.818 93.6761C160 93.6761 159.286 93.4886 158.676 93.1136C158.066 92.7386 157.593 92.214 157.256 91.5398C156.919 90.8655 156.75 90.0777 156.75 89.1761C156.75 88.2708 156.919 87.4792 157.256 86.8011C157.593 86.1231 158.066 85.5966 158.676 85.2216C159.286 84.8466 160 84.6591 160.818 84.6591C161.636 84.6591 162.35 84.8466 162.96 85.2216C163.57 85.5966 164.044 86.1231 164.381 86.8011C164.718 87.4792 164.886 88.2708 164.886 89.1761C164.886 90.0777 164.718 90.8655 164.381 91.5398C164.044 92.214 163.57 92.7386 162.96 93.1136C162.35 93.4886 161.636 93.6761 160.818 93.6761ZM160.824 92.25C161.354 92.25 161.794 92.1098 162.142 91.8295C162.491 91.5492 162.748 91.1761 162.915 90.7102C163.085 90.2443 163.17 89.7311 163.17 89.1705C163.17 88.6136 163.085 88.1023 162.915 87.6364C162.748 87.1667 162.491 86.7898 162.142 86.5057C161.794 86.2216 161.354 86.0795 160.824 86.0795C160.29 86.0795 159.847 86.2216 159.494 86.5057C159.146 86.7898 158.886 87.1667 158.716 87.6364C158.549 88.1023 158.466 88.6136 158.466 89.1705C158.466 89.7311 158.549 90.2443 158.716 90.7102C158.886 91.1761 159.146 91.5492 159.494 91.8295C159.847 92.1098 160.29 92.25 160.824 92.25ZM168.345 90.5398L168.334 88.4659H168.629L172.107 84.7727H174.141L170.175 88.9773H169.908L168.345 90.5398ZM166.783 93.5V81.8636H168.482V93.5H166.783ZM172.294 93.5L169.169 89.3523L170.339 88.1648L174.379 93.5H172.294ZM179.091 93.6761C178.231 93.6761 177.491 93.4924 176.869 93.125C176.252 92.7538 175.775 92.233 175.438 91.5625C175.104 90.8883 174.938 90.0985 174.938 89.1932C174.938 88.2992 175.104 87.5114 175.438 86.8295C175.775 86.1477 176.244 85.6155 176.847 85.233C177.453 84.8504 178.161 84.6591 178.972 84.6591C179.464 84.6591 179.941 84.7405 180.403 84.9034C180.866 85.0663 181.28 85.322 181.648 85.6705C182.015 86.0189 182.305 86.4716 182.517 87.0284C182.729 87.5814 182.835 88.2538 182.835 89.0455V89.6477H175.898V88.375H181.17C181.17 87.928 181.08 87.5322 180.898 87.1875C180.716 86.839 180.46 86.5644 180.131 86.3636C179.805 86.1629 179.422 86.0625 178.983 86.0625C178.506 86.0625 178.089 86.1799 177.733 86.4148C177.381 86.6458 177.108 86.9489 176.915 87.3239C176.725 87.6951 176.631 88.0985 176.631 88.5341V89.5284C176.631 90.1117 176.733 90.608 176.938 91.017C177.146 91.4261 177.436 91.7386 177.807 91.9545C178.178 92.1667 178.612 92.2727 179.108 92.2727C179.43 92.2727 179.723 92.2273 179.989 92.1364C180.254 92.0417 180.483 91.9015 180.676 91.7159C180.869 91.5303 181.017 91.3011 181.119 91.0284L182.727 91.3182C182.598 91.7917 182.367 92.2064 182.034 92.5625C181.705 92.9148 181.29 93.1894 180.79 93.3864C180.294 93.5795 179.727 93.6761 179.091 93.6761ZM186.419 88.3182V93.5H184.72V84.7727H186.351V86.1932H186.459C186.66 85.7311 186.974 85.3598 187.402 85.0795C187.834 84.7992 188.377 84.6591 189.033 84.6591C189.627 84.6591 190.148 84.7841 190.595 85.0341C191.042 85.2803 191.389 85.6477 191.635 86.1364C191.881 86.625 192.004 87.2292 192.004 87.9489V93.5H190.305V88.1534C190.305 87.5208 190.141 87.0265 189.811 86.6705C189.482 86.3106 189.029 86.1307 188.453 86.1307C188.059 86.1307 187.709 86.2159 187.402 86.3864C187.099 86.5568 186.858 86.8068 186.68 87.1364C186.506 87.4621 186.419 87.8561 186.419 88.3182ZM200.822 86.9034L199.283 87.1761C199.218 86.9792 199.116 86.7917 198.976 86.6136C198.839 86.4356 198.654 86.2898 198.419 86.1761C198.184 86.0625 197.891 86.0057 197.538 86.0057C197.057 86.0057 196.656 86.1136 196.334 86.3295C196.012 86.5417 195.851 86.8163 195.851 87.1534C195.851 87.4451 195.959 87.6799 196.175 87.858C196.391 88.036 196.739 88.1818 197.22 88.2955L198.607 88.6136C199.41 88.7992 200.008 89.0852 200.402 89.4716C200.796 89.858 200.993 90.3598 200.993 90.9773C200.993 91.5 200.841 91.9659 200.538 92.375C200.239 92.7803 199.821 93.0985 199.283 93.3295C198.749 93.5606 198.129 93.6761 197.425 93.6761C196.447 93.6761 195.65 93.4678 195.033 93.0511C194.415 92.6307 194.036 92.0341 193.896 91.2614L195.538 91.0114C195.641 91.4394 195.851 91.7633 196.169 91.983C196.487 92.1989 196.902 92.3068 197.413 92.3068C197.97 92.3068 198.415 92.1913 198.749 91.9602C199.082 91.7254 199.249 91.4394 199.249 91.1023C199.249 90.8295 199.146 90.6004 198.942 90.4148C198.741 90.2292 198.432 90.089 198.016 89.9943L196.538 89.6705C195.724 89.4848 195.122 89.1894 194.732 88.7841C194.345 88.3788 194.152 87.8655 194.152 87.2443C194.152 86.7292 194.296 86.2784 194.584 85.892C194.872 85.5057 195.269 85.2045 195.777 84.9886C196.285 84.7689 196.866 84.6591 197.521 84.6591C198.464 84.6591 199.207 84.8636 199.749 85.2727C200.29 85.678 200.648 86.2216 200.822 86.9034Z" fill="white"/>
        </g>
        <rect x="11" y="11" width="270" height="133" stroke="#0F7CFF" stroke-width="8"/>
        <rect x="2" y="2" width="18" height="18" fill="white" stroke="#0F7CFF" stroke-width="4"/>
        <rect x="2" y="68.5" width="18" height="18" fill="white" stroke="#0F7CFF" stroke-width="4"/>
        <rect x="2" y="135" width="18" height="18" fill="white" stroke="#0F7CFF" stroke-width="4"/>
        <rect x="272" y="2" width="18" height="18" fill="white" stroke="#0F7CFF" stroke-width="4"/>
        <rect x="272" y="68.5" width="18" height="18" fill="white" stroke="#0F7CFF" stroke-width="4"/>
        <rect x="272" y="135" width="18" height="18" fill="white" stroke="#0F7CFF" stroke-width="4"/>
        <defs>
        <filter id="filter0_d_3009_1322" x="72.9681" y="49.6582" width="20.4646" height="22.4766" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
        <feFlood flood-opacity="0" result="BackgroundImageFix"/>
        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
        <feOffset dy="1"/>
        <feGaussianBlur stdDeviation="1"/>
        <feComposite in2="hardAlpha" operator="out"/>
        <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/>
        <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_3009_1322"/>
        <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_3009_1322" result="shape"/>
        </filter>
        <filter id="filter1_d_3009_1322" x="82" y="61.5" width="154" height="60" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
        <feFlood flood-opacity="0" result="BackgroundImageFix"/>
        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
        <feOffset dx="4" dy="4"/>
        <feGaussianBlur stdDeviation="5"/>
        <feComposite in2="hardAlpha" operator="out"/>
        <feColorMatrix type="matrix" values="0 0 0 0 0.415686 0 0 0 0 0.466667 0 0 0 0 0.588235 0 0 0 0.16 0"/>
        <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_3009_1322"/>
        <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_3009_1322" result="shape"/>
        </filter>
        </defs>
        </svg>
      </div>
      <button id="start-scan" class="start-button" type="button">
        <span class="start-button-icon-slot" aria-hidden="true">
          <span class="start-button-icon">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M3 8H11" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
              <path d="M9 4L13 8L9 12" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </span>
          <span class="start-button-spinner">
            <span class="start-spinner"></span>
          </span>
        </span>
        <span id="start-scan-text">Begin Scan</span>
      </button>
    </div>
    <div id="loading-screen" class="loading-screen" aria-hidden="true">
      <div class="loading-title">
        Interrogating <span class="loading-title-strong">design tokens...</span>
      </div>
      <div class="start-picture" aria-hidden="true">
        <svg width="292" height="155" viewBox="0 0 292 155" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g filter="url(#filter0_d_3009_1322)">
        <path d="M78.8168 67.8643L75.6631 51.6145L90.143 59.6353L83.0104 61.7272L78.8168 67.8643Z" fill="black"/>
        <path d="M78.8168 67.8643L75.6631 51.6145L90.143 59.6353L83.0104 61.7272L78.8168 67.8643Z" stroke="white"/>
        </g>
        <g filter="url(#filter1_d_3009_1322)">
        <path d="M88 69.5C88 68.3954 88.8954 67.5 90 67.5H202C213.046 67.5 222 76.4543 222 87.5C222 98.5457 213.046 107.5 202 107.5H112C98.7452 107.5 88 96.7548 88 83.5V69.5Z" fill="#6A7796" shape-rendering="crispEdges"/>
        <path d="M90 68.5H202C212.493 68.5 221 77.0066 221 87.5C221 97.9934 212.493 106.5 202 106.5H112C99.2975 106.5 89 96.2025 89 83.5V69.5C89 68.9477 89.4477 68.5 90 68.5Z" stroke="#555F78" stroke-width="2" shape-rendering="crispEdges"/>
        <path d="M107.682 93.6932C107.129 93.6932 106.629 93.5909 106.182 93.3864C105.735 93.178 105.381 92.8769 105.119 92.483C104.862 92.089 104.733 91.6061 104.733 91.0341C104.733 90.5417 104.828 90.1364 105.017 89.8182C105.206 89.5 105.462 89.2481 105.784 89.0625C106.106 88.8769 106.466 88.7367 106.864 88.642C107.261 88.5473 107.667 88.4754 108.08 88.4261C108.602 88.3655 109.027 88.3163 109.352 88.2784C109.678 88.2367 109.915 88.1705 110.062 88.0795C110.21 87.9886 110.284 87.8409 110.284 87.6364V87.5966C110.284 87.1004 110.144 86.7159 109.864 86.4432C109.587 86.1705 109.174 86.0341 108.625 86.0341C108.053 86.0341 107.602 86.161 107.273 86.4148C106.947 86.6648 106.722 86.9432 106.597 87.25L105 86.8864C105.189 86.3561 105.466 85.928 105.83 85.6023C106.197 85.2727 106.619 85.0341 107.097 84.8864C107.574 84.7348 108.076 84.6591 108.602 84.6591C108.951 84.6591 109.32 84.7008 109.71 84.7841C110.104 84.8636 110.472 85.0114 110.812 85.2273C111.157 85.4432 111.439 85.7519 111.659 86.1534C111.879 86.5511 111.989 87.0682 111.989 87.7045V93.5H110.33V92.3068H110.261C110.152 92.5265 109.987 92.7424 109.767 92.9545C109.547 93.1667 109.265 93.3428 108.92 93.483C108.576 93.6231 108.163 93.6932 107.682 93.6932ZM108.051 92.3295C108.521 92.3295 108.922 92.2367 109.256 92.0511C109.593 91.8655 109.848 91.6231 110.023 91.3239C110.201 91.0208 110.29 90.697 110.29 90.3523V89.2273C110.229 89.2879 110.112 89.3447 109.938 89.3977C109.767 89.447 109.572 89.4905 109.352 89.5284C109.133 89.5625 108.919 89.5947 108.71 89.625C108.502 89.6515 108.328 89.6742 108.188 89.6932C107.858 89.7348 107.557 89.8049 107.284 89.9034C107.015 90.0019 106.799 90.1439 106.636 90.3295C106.477 90.5114 106.398 90.7538 106.398 91.0568C106.398 91.4773 106.553 91.7955 106.864 92.0114C107.174 92.2235 107.57 92.3295 108.051 92.3295ZM114.251 96.7727V84.7727H115.911V86.1875H116.053C116.151 86.0057 116.293 85.7955 116.479 85.5568C116.664 85.3182 116.922 85.1098 117.251 84.9318C117.581 84.75 118.017 84.6591 118.558 84.6591C119.263 84.6591 119.892 84.8371 120.445 85.1932C120.998 85.5492 121.431 86.0625 121.746 86.733C122.064 87.4034 122.223 88.2102 122.223 89.1534C122.223 90.0966 122.066 90.9053 121.751 91.5795C121.437 92.25 121.005 92.767 120.456 93.1307C119.907 93.4905 119.28 93.6705 118.575 93.6705C118.045 93.6705 117.611 93.5814 117.274 93.4034C116.941 93.2254 116.679 93.017 116.49 92.7784C116.301 92.5398 116.155 92.3277 116.053 92.142H115.95V96.7727H114.251ZM115.916 89.1364C115.916 89.75 116.005 90.2879 116.183 90.75C116.361 91.2121 116.619 91.5739 116.956 91.8352C117.293 92.0928 117.706 92.2216 118.195 92.2216C118.702 92.2216 119.126 92.0871 119.467 91.8182C119.808 91.5455 120.066 91.1761 120.24 90.7102C120.418 90.2443 120.507 89.7197 120.507 89.1364C120.507 88.5606 120.42 88.0436 120.246 87.5852C120.075 87.1269 119.818 86.7652 119.473 86.5C119.132 86.2348 118.706 86.1023 118.195 86.1023C117.702 86.1023 117.286 86.2292 116.945 86.483C116.607 86.7367 116.352 87.0909 116.178 87.5455C116.003 88 115.916 88.5303 115.916 89.1364ZM124.126 96.7727V84.7727H125.786V86.1875H125.928C126.026 86.0057 126.168 85.7955 126.354 85.5568C126.539 85.3182 126.797 85.1098 127.126 84.9318C127.456 84.75 127.892 84.6591 128.433 84.6591C129.138 84.6591 129.767 84.8371 130.32 85.1932C130.873 85.5492 131.306 86.0625 131.621 86.733C131.939 87.4034 132.098 88.2102 132.098 89.1534C132.098 90.0966 131.941 90.9053 131.626 91.5795C131.312 92.25 130.88 92.767 130.331 93.1307C129.782 93.4905 129.155 93.6705 128.45 93.6705C127.92 93.6705 127.486 93.5814 127.149 93.4034C126.816 93.2254 126.554 93.017 126.365 92.7784C126.176 92.5398 126.03 92.3277 125.928 92.142H125.825V96.7727H124.126ZM125.791 89.1364C125.791 89.75 125.88 90.2879 126.058 90.75C126.236 91.2121 126.494 91.5739 126.831 91.8352C127.168 92.0928 127.581 92.2216 128.07 92.2216C128.577 92.2216 129.001 92.0871 129.342 91.8182C129.683 91.5455 129.941 91.1761 130.115 90.7102C130.293 90.2443 130.382 89.7197 130.382 89.1364C130.382 88.5606 130.295 88.0436 130.121 87.5852C129.95 87.1269 129.693 86.7652 129.348 86.5C129.007 86.2348 128.581 86.1023 128.07 86.1023C127.577 86.1023 127.161 86.2292 126.82 86.483C126.482 86.7367 126.227 87.0909 126.053 87.5455C125.878 88 125.791 88.5303 125.791 89.1364ZM135.7 81.8636V93.5H134.001V81.8636H135.7ZM139.06 96.7727C138.806 96.7727 138.575 96.7519 138.366 96.7102C138.158 96.6723 138.003 96.6307 137.901 96.5852L138.31 95.1932C138.62 95.2765 138.897 95.3125 139.139 95.3011C139.382 95.2898 139.596 95.1989 139.781 95.0284C139.971 94.858 140.137 94.5795 140.281 94.1932L140.491 93.6136L137.298 84.7727H139.116L141.327 91.5455H141.418L143.628 84.7727H145.452L141.855 94.6648C141.688 95.1193 141.476 95.5038 141.219 95.8182C140.961 96.1364 140.654 96.375 140.298 96.5341C139.942 96.6932 139.529 96.7727 139.06 96.7727ZM155.357 84.7727V86.1364H150.589V84.7727H155.357ZM151.868 82.6818H153.567V90.9375C153.567 91.267 153.616 91.5152 153.714 91.6818C153.813 91.8447 153.94 91.9564 154.095 92.017C154.254 92.0739 154.427 92.1023 154.612 92.1023C154.749 92.1023 154.868 92.0928 154.97 92.0739C155.072 92.0549 155.152 92.0398 155.209 92.0284L155.516 93.4318C155.417 93.4697 155.277 93.5076 155.095 93.5455C154.913 93.5871 154.686 93.6098 154.413 93.6136C153.966 93.6212 153.55 93.5417 153.163 93.375C152.777 93.2083 152.464 92.9508 152.226 92.6023C151.987 92.2538 151.868 91.8163 151.868 91.2898V82.6818ZM160.818 93.6761C160 93.6761 159.286 93.4886 158.676 93.1136C158.066 92.7386 157.593 92.214 157.256 91.5398C156.919 90.8655 156.75 90.0777 156.75 89.1761C156.75 88.2708 156.919 87.4792 157.256 86.8011C157.593 86.1231 158.066 85.5966 158.676 85.2216C159.286 84.8466 160 84.6591 160.818 84.6591C161.636 84.6591 162.35 84.8466 162.96 85.2216C163.57 85.5966 164.044 86.1231 164.381 86.8011C164.718 87.4792 164.886 88.2708 164.886 89.1761C164.886 90.0777 164.718 90.8655 164.381 91.5398C164.044 92.214 163.57 92.7386 162.96 93.1136C162.35 93.4886 161.636 93.6761 160.818 93.6761ZM160.824 92.25C161.354 92.25 161.794 92.1098 162.142 91.8295C162.491 91.5492 162.748 91.1761 162.915 90.7102C163.085 90.2443 163.17 89.7311 163.17 89.1705C163.17 88.6136 163.085 88.1023 162.915 87.6364C162.748 87.1667 162.491 86.7898 162.142 86.5057C161.794 86.2216 161.354 86.0795 160.824 86.0795C160.29 86.0795 159.847 86.2216 159.494 86.5057C159.146 86.7898 158.886 87.1667 158.716 87.6364C158.549 88.1023 158.466 88.6136 158.466 89.1705C158.466 89.7311 158.549 90.2443 158.716 90.7102C158.886 91.1761 159.146 91.5492 159.494 91.8295C159.847 92.1098 160.29 92.25 160.824 92.25ZM168.345 90.5398L168.334 88.4659H168.629L172.107 84.7727H174.141L170.175 88.9773H169.908L168.345 90.5398ZM166.783 93.5V81.8636H168.482V93.5H166.783ZM172.294 93.5L169.169 89.3523L170.339 88.1648L174.379 93.5H172.294ZM179.091 93.6761C178.231 93.6761 177.491 93.4924 176.869 93.125C176.252 92.7538 175.775 92.233 175.438 91.5625C175.104 90.8883 174.938 90.0985 174.938 89.1932C174.938 88.2992 175.104 87.5114 175.438 86.8295C175.775 86.1477 176.244 85.6155 176.847 85.233C177.453 84.8504 178.161 84.6591 178.972 84.6591C179.464 84.6591 179.941 84.7405 180.403 84.9034C180.866 85.0663 181.28 85.322 181.648 85.6705C182.015 86.0189 182.305 86.4716 182.517 87.0284C182.729 87.5814 182.835 88.2538 182.835 89.0455V89.6477H175.898V88.375H181.17C181.17 87.928 181.08 87.5322 180.898 87.1875C180.716 86.839 180.46 86.5644 180.131 86.3636C179.805 86.1629 179.422 86.0625 178.983 86.0625C178.506 86.0625 178.089 86.1799 177.733 86.4148C177.381 86.6458 177.108 86.9489 176.915 87.3239C176.725 87.6951 176.631 88.0985 176.631 88.5341V89.5284C176.631 90.1117 176.733 90.608 176.938 91.017C177.146 91.4261 177.436 91.7386 177.807 91.9545C178.178 92.1667 178.612 92.2727 179.108 92.2727C179.43 92.2727 179.723 92.2273 179.989 92.1364C180.254 92.0417 180.483 91.9015 180.676 91.7159C180.869 91.5303 181.017 91.3011 181.119 91.0284L182.727 91.3182C182.598 91.7917 182.367 92.2064 182.034 92.5625C181.705 92.9148 181.29 93.1894 180.79 93.3864C180.294 93.5795 179.727 93.6761 179.091 93.6761ZM186.419 88.3182V93.5H184.72V84.7727H186.351V86.1932H186.459C186.66 85.7311 186.974 85.3598 187.402 85.0795C187.834 84.7992 188.377 84.6591 189.033 84.6591C189.627 84.6591 190.148 84.7841 190.595 85.0341C191.042 85.2803 191.389 85.6477 191.635 86.1364C191.881 86.625 192.004 87.2292 192.004 87.9489V93.5H190.305V88.1534C190.305 87.5208 190.141 87.0265 189.811 86.6705C189.482 86.3106 189.029 86.1307 188.453 86.1307C188.059 86.1307 187.709 86.2159 187.402 86.3864C187.099 86.5568 186.858 86.8068 186.68 87.1364C186.506 87.4621 186.419 87.8561 186.419 88.3182ZM200.822 86.9034L199.283 87.1761C199.218 86.9792 199.116 86.7917 198.976 86.6136C198.839 86.4356 198.654 86.2898 198.419 86.1761C198.184 86.0625 197.891 86.0057 197.538 86.0057C197.057 86.0057 196.656 86.1136 196.334 86.3295C196.012 86.5417 195.851 86.8163 195.851 87.1534C195.851 87.4451 195.959 87.6799 196.175 87.858C196.391 88.036 196.739 88.1818 197.22 88.2955L198.607 88.6136C199.41 88.7992 200.008 89.0852 200.402 89.4716C200.796 89.858 200.993 90.3598 200.993 90.9773C200.993 91.5 200.841 91.9659 200.538 92.375C200.239 92.7803 199.821 93.0985 199.283 93.3295C198.749 93.5606 198.129 93.6761 197.425 93.6761C196.447 93.6761 195.65 93.4678 195.033 93.0511C194.415 92.6307 194.036 92.0341 193.896 91.2614L195.538 91.0114C195.641 91.4394 195.851 91.7633 196.169 91.983C196.487 92.1989 196.902 92.3068 197.413 92.3068C197.97 92.3068 198.415 92.1913 198.749 91.9602C199.082 91.7254 199.249 91.4394 199.249 91.1023C199.249 90.8295 199.146 90.6004 198.942 90.4148C198.741 90.2292 198.432 90.089 198.016 89.9943L196.538 89.6705C195.724 89.4848 195.122 89.1894 194.732 88.7841C194.345 88.3788 194.152 87.8655 194.152 87.2443C194.152 86.7292 194.296 86.2784 194.584 85.892C194.872 85.5057 195.269 85.2045 195.777 84.9886C196.285 84.7689 196.866 84.6591 197.521 84.6591C198.464 84.6591 199.207 84.8636 199.749 85.2727C200.29 85.678 200.648 86.2216 200.822 86.9034Z" fill="white"/>
        </g>
        <rect x="11" y="11" width="270" height="133" stroke="#0F7CFF" stroke-width="8"/>
        <rect x="2" y="2" width="18" height="18" fill="white" stroke="#0F7CFF" stroke-width="4"/>
        <rect x="2" y="68.5" width="18" height="18" fill="white" stroke="#0F7CFF" stroke-width="4"/>
        <rect x="2" y="135" width="18" height="18" fill="white" stroke="#0F7CFF" stroke-width="4"/>
        <rect x="272" y="2" width="18" height="18" fill="white" stroke="#0F7CFF" stroke-width="4"/>
        <rect x="272" y="68.5" width="18" height="18" fill="white" stroke="#0F7CFF" stroke-width="4"/>
        <rect x="272" y="135" width="18" height="18" fill="white" stroke="#0F7CFF" stroke-width="4"/>
        <defs>
        <filter id="filter0_d_3009_1322" x="72.9681" y="49.6582" width="20.4646" height="22.4766" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
        <feFlood flood-opacity="0" result="BackgroundImageFix"/>
        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
        <feOffset dy="1"/>
        <feGaussianBlur stdDeviation="1"/>
        <feComposite in2="hardAlpha" operator="out"/>
        <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/>
        <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_3009_1322"/>
        <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_3009_1322" result="shape"/>
        </filter>
        <filter id="filter1_d_3009_1322" x="82" y="61.5" width="154" height="60" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
        <feFlood flood-opacity="0" result="BackgroundImageFix"/>
        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
        <feOffset dx="4" dy="4"/>
        <feGaussianBlur stdDeviation="5"/>
        <feComposite in2="hardAlpha" operator="out"/>
        <feColorMatrix type="matrix" values="0 0 0 0 0.415686 0 0 0 0 0.466667 0 0 0 0 0.588235 0 0 0 0.16 0"/>
        <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_3009_1322"/>
        <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_3009_1322" result="shape"/>
        </filter>
        </defs>
        </svg>
      </div>
      <button class="start-button is-loading" type="button" disabled>
        <span class="start-button-icon-slot" aria-hidden="true">
          <span class="start-button-icon">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M3 8H11" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
              <path d="M9 4L13 8L9 12" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </span>
          <span class="start-button-spinner">
            <span class="start-spinner"></span>
          </span>
        </span>
        <span>Scanning</span>
      </button>
    </div>
    <div class="top-bar card">
      <div class="header-row">
        <div class="header-title">
          <h2 id="title">Inspecting selection...</h2>
          <span id="status-icon" class="header-title-icon" aria-hidden="true">
            <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="8" cy="8" r="7" stroke="#02542D" stroke-width="1.6" />
              <path d="M5 8.1L7.2 10.1L11 6.2" stroke="#02542D" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
          </span>
          <span id="status-spinner" class="header-title-icon is-hidden" aria-hidden="true">
            <span class="status-spinner-ring"></span>
          </span>
        </div>
        <div class="header-controls">
          <select id="filter" class="select-control" title="Filter results">
            <option value="missing">Missing Only</option>
            <option value="all">All</option>
          </select>
          <details class="filter-menu">
            <summary class="filter-icon-button" title="Filter with a dropdown" aria-label="Filter with a dropdown">
              <svg viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <path d="M11 1.5H1L5 6.23V9.5L7 10.5V6.23L11 1.5Z" stroke="#1E1E1E" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
            </summary>
            <div class="filter-menu-content">
              <label class="filter-menu-label">
                Mode
                <select id="theme" class="filter-menu-select" title="Preferred mode">
                  <option value="Light">Light</option>
                  <option value="Dark">Dark</option>
                </select>
              </label>
              <label class="filter-menu-label">
                Libraries
                <select id="library" class="filter-menu-select" title="Libraries">
                  <option value="local">Created in this file</option>
                </select>
              </label>
            </div>
          </details>
          <button
            id="refresh"
            class="control-button"
            title="Refresh report"
            aria-label="Refresh report"
          >
            <svg viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <path d="M8.5 0.5L10.5 2.5M10.5 2.5L8.5 4.5M10.5 2.5L3.5 2.5C2.96957 2.5 2.46086 2.71071 2.08579 3.08579C1.71071 3.46086 1.5 3.96957 1.5 4.5V5.5M3.5 11.5L1.5 9.5M1.5 9.5L3.5 7.5M1.5 9.5L8.5 9.5C9.03043 9.5 9.53914 9.28929 9.91421 8.91421C10.2893 8.53914 10.5 8.03043 10.5 7.5V6.5" stroke="#1E1E1E" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Scan Again
          </button>
        </div>
      </div>
      <div class="summary-row">
        <div class="summary-pill applied">
          Applied: <span id="applied-count">--</span>
        </div>
        <div class="summary-pill missing">
          Missing: <span id="missing-count">--</span>
        </div>
        <div class="summary-pill unsupported">
          Unsupported: <span id="unsupported-count">--</span>
        </div>
      </div>
      <div class="filter-bar">
        <div class="filter-options">
          <label class="filter-option">
            <input type="checkbox" id="chk-color" checked />
            Color
          </label>
          <label class="filter-option">
            <input type="checkbox" id="chk-typography" checked />
            Typography
          </label>
          <label class="filter-option">
            <input type="checkbox" id="chk-spacing" checked />
            Spacings
          </label>
        </div>
        <button
          id="apply-all"
          class="apply-button"
          title="Apply nearest tokens to all"
          aria-label="Apply nearest tokens to all"
        >
          Apply Token To All
        </button>
      </div>
      <p id="message" class="status-message is-hidden">Select a single rectangle to inspect.</p>
    </div>
    <p id="dark-note" style="display:none;font-size:12px;color:#475569;margin:8px 0 0;">
      Using Dark modeâ€”remember to set Figma's Appearance to Dark so tokens resolve correctly.
    </p>
    <p id="library-note" style="display:none;font-size:12px;color:#b91c1c;margin:6px 0 0;">
      Unable to load libraries. Showing local variables only.
    </p>
    <div id="list"></div>
    <script>
      const titleEl = document.getElementById("title");
      const messageEl = document.getElementById("message");
      const statusIconEl = document.getElementById("status-icon");
      const statusSpinnerEl = document.getElementById("status-spinner");
      const appliedCountEl = document.getElementById("applied-count");
      const missingCountEl = document.getElementById("missing-count");
      const unsupportedCountEl = document.getElementById("unsupported-count");
      const refreshBtn = document.getElementById("refresh");
      const applyAllBtn = document.getElementById("apply-all");
      const themeSelect = document.getElementById("theme");
      const filterSelect = document.getElementById("filter");
      const chkColor = document.getElementById("chk-color");
      const chkTypography = document.getElementById("chk-typography");
      const chkSpacing = document.getElementById("chk-spacing");
      const cardEl = document.querySelector(".card");
      const listEl = document.getElementById("list");
      const darkNote = document.getElementById("dark-note");
      const librarySelect = document.getElementById("library");
      const libraryNote = document.getElementById("library-note");
      const startScreen = document.getElementById("start-screen");
      const startTitleEl = document.getElementById("start-title");
      const startScanBtn = document.getElementById("start-scan");
      const startScanText = document.getElementById("start-scan-text");
      const loadingScreen = document.getElementById("loading-screen");
      const filterMenu = document.querySelector(".filter-menu");
      let suppressLoadingOnce = false;
      let isApplyingAll = false;
      const defaultStartTitleHtml = startTitleEl ? startTitleEl.innerHTML : "";

      const updateSummaryCounts = (message) => {
        if (!appliedCountEl || !missingCountEl || !unsupportedCountEl) return;
        const match = String(message).match(
          /(\d+)\s+with tokens,\s+(\d+)\s+missing,\s+(\d+)\s+unsupported/i
        );
        if (match) {
          appliedCountEl.textContent = match[1];
          missingCountEl.textContent = match[2];
          unsupportedCountEl.textContent = match[3];
          return true;
        }
        appliedCountEl.textContent = "--";
        missingCountEl.textContent = "--";
        unsupportedCountEl.textContent = "--";
        return false;
      };

      const getMode = () => {
        const val = themeSelect?.value === "Dark" ? "Dark" : "Light";
        return val;
      };

      const updateDarkNote = () => {
        if (!darkNote) return;
        const isDark = getMode() === "Dark";
        darkNote.style.display = isDark ? "block" : "none";
      };

      const setLibraryError = (message) => {
        if (!libraryNote) return;
        if (message) {
          libraryNote.textContent = message;
          libraryNote.style.display = "block";
        } else {
          libraryNote.textContent = "Unable to load libraries. Showing local variables only.";
          libraryNote.style.display = "none";
        }
      };

      const setEmptyState = (isEmpty) => {
        document.body.classList.toggle("is-empty", isEmpty);
        if (startScreen) {
          startScreen.setAttribute("aria-hidden", isEmpty ? "false" : "true");
        }
        if (isEmpty) {
          if (startTitleEl && defaultStartTitleHtml) {
            startTitleEl.innerHTML = defaultStartTitleHtml;
          }
          setStartScanLoading(false);
        }
      };

      const setLoadingState = (isLoading) => {
        document.body.classList.toggle("is-loading", isLoading);
        if (loadingScreen) {
          loadingScreen.setAttribute("aria-hidden", isLoading ? "false" : "true");
        }
      };

      const setStartScanLoading = (isLoading) => {
        if (!startScanBtn || !startScanText) return;
        startScanBtn.classList.toggle("is-loading", isLoading);
        startScanBtn.disabled = isLoading;
        startScanBtn.setAttribute("aria-busy", isLoading ? "true" : "false");
        startScanText.textContent = isLoading ? "Scanning" : "Begin Scan";
      };

      const getLibraryId = () => {
        return librarySelect?.value || "local";
      };


      const renderLibraryOptions = (payload) => {
        if (!librarySelect || !payload) return;
        const options = payload.options || [];
        librarySelect.innerHTML = options
          .map((opt) => {
            const label = opt.reason ? `${opt.label} (${opt.reason})` : opt.label;
            const disabled = opt.disabled ? "disabled" : "";
            return `<option value="${opt.id}" ${disabled}>${label}</option>`;
          })
          .join("");
        const candidate =
          payload.selectedId && librarySelect.querySelector(`option[value="${payload.selectedId}"]`)
            ? payload.selectedId
            : options[0]?.id;
        if (candidate) {
          librarySelect.value = candidate;
        }
        setLibraryError(payload.error);
      };

      const formatStatusMessage = (message) => {
        if (!message) return "";
        const normalized = String(message).trim();
        const lower = normalized.toLowerCase();
        if (lower.includes("no matching")) {
          return "No match";
        }
        if (lower.includes("unsupported stroke list")) {
          return "No match";
        }
        const colonIndex = normalized.indexOf(":");
        if (colonIndex > -1) {
          const prefix = normalized.slice(0, colonIndex).toLowerCase();
          if (
            prefix.includes("matches variable") ||
            prefix.includes("using variable") ||
            prefix.includes("matches style") ||
            prefix.includes("using style")
          ) {
            return normalized.slice(colonIndex + 1).trim();
          }
        }
        return normalized;
      };

      const formatStatusLine = (label, item) => {
        if (!item) return "";
        const value = formatStatusMessage(item.message);
        if (item.state === "missing" && value) {
          return `${label}: ${value} (token found)`;
        }
        return `${label}: ${value}`;
      };

      const getStatusColor = (state) => {
        if (state === "found" || state === "applied") return "#16a34a";
        if (state === "missing" || state === "error") return "#b91c1c";
        if (state === "info") return "#d97706";
        return "#475569";
      };

      const renderList = (items) => {
        if (!listEl) return;
        if (!items || items.length === 0) {
          listEl.innerHTML = `<p style="color:#94a3b8;font-size:12px;margin-top:12px;">No supported nodes found in selection.</p>`;
          return;
        }

        if (!window.__dslintCollapsedIds) {
          window.__dslintCollapsedIds = new Set();
        }
        const collapsedIds = window.__dslintCollapsedIds;
        const activeFilter = filterSelect?.value === "all" ? "all" : "missing";
        const filtered = activeFilter === "missing" ? items.filter((i) => i.state === "missing") : items;

        const rows = filtered
          .map((item) => {
            const highlight = `<button data-id="${item.id}" class="row-highlight layer-button layer-button--icon" title="Highlight in canvas">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#0f172a" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="3.5"/>
                <line x1="12" y1="2" x2="12" y2="6"/>
                <line x1="12" y1="18" x2="12" y2="22"/>
                <line x1="2" y1="12" x2="6" y2="12"/>
                <line x1="18" y1="12" x2="22" y2="12"/>
              </svg>
            </button>`;
            const isCollapsed = collapsedIds.has(item.id);
            const toggle = `<button data-id="${item.id}" class="layer-card__toggle layer-button layer-button--icon" aria-label="Toggle layer details" aria-expanded="${!isCollapsed}">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#0f172a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="6 15 12 9 18 15"></polyline>
              </svg>
            </button>`;
            const hasMissing =
              item.fill?.state === "missing" ||
              item.stroke?.state === "missing" ||
              item.padding?.state === "missing" ||
              item.gap?.state === "missing" ||
              item.strokeWeight?.state === "missing" ||
              item.cornerRadius?.state === "missing" ||
              item.typography?.state === "missing";
            const layerApply = `<button data-id="${item.id}" class="layer-apply layer-button" ${
              hasMissing ? "" : "disabled"
            }>Apply Layer Tokens</button>`;
            const fillStatus = item.fill
              ? `<div class="layer-status${item.fill.state === "missing" ? " layer-status--missing" : ""}" style="color:${getStatusColor(item.fill.state)};">${formatStatusLine("Fill", item.fill)}</div>`
              : "";
            const strokeStatus = item.stroke
              ? `<div class="layer-status${item.stroke.state === "missing" ? " layer-status--missing" : ""}" style="color:${getStatusColor(item.stroke.state)};">${formatStatusLine("Stroke", item.stroke)}</div>`
              : "";
            const paddingStatus = item.padding
              ? `<div class="layer-status${item.padding.state === "missing" ? " layer-status--missing" : ""}" style="color:${getStatusColor(item.padding.state)};">${formatStatusLine("Padding", item.padding)}</div>`
              : "";
            const gapStatus = item.gap
              ? `<div class="layer-status${item.gap.state === "missing" ? " layer-status--missing" : ""}" style="color:${getStatusColor(item.gap.state)};">${formatStatusLine("Gap", item.gap)}</div>`
              : "";
            const borderStatus = item.strokeWeight
              ? `<div class="layer-status${item.strokeWeight.state === "missing" ? " layer-status--missing" : ""}" style="color:${getStatusColor(item.strokeWeight.state)};">${formatStatusLine("Stroke Weight", item.strokeWeight)}</div>`
              : "";
            const radiusStatus = item.cornerRadius
              ? `<div class="layer-status${item.cornerRadius.state === "missing" ? " layer-status--missing" : ""}" style="color:${getStatusColor(item.cornerRadius.state)};">${formatStatusLine("Corner Radius", item.cornerRadius)}</div>`
              : "";
            const typoStatus = item.typography
              ? `<div class="layer-status${item.typography.state === "missing" ? " layer-status--missing" : ""}" style="color:${getStatusColor(item.typography.state)};">${formatStatusLine("Typography", item.typography)}</div>`
              : "";

            const fillBtn =
              item.fill?.state === "missing"
                ? `<button data-id="${item.id}" data-target="fill" class="row-apply layer-button">Apply Fill Token</button>`
                : "";
            const strokeBtn =
              item.stroke?.state === "missing"
                ? `<button data-id="${item.id}" data-target="stroke" class="row-apply layer-button">Apply Stroke Token</button>`
                : "";
            const paddingBtn =
              item.padding?.state === "missing"
                ? `<button data-id="${item.id}" data-target="padding" class="row-apply layer-button">Apply Padding Token</button>`
                : "";
            const gapBtn =
              item.gap?.state === "missing"
                ? `<button data-id="${item.id}" data-target="gap" class="row-apply layer-button">Apply Gap Token</button>`
                : "";
            const borderBtn =
              item.strokeWeight?.state === "missing"
                ? `<button data-id="${item.id}" data-target="strokeWeight" class="row-apply layer-button">Apply Stroke Weight Token</button>`
                : "";
            const radiusBtn =
              item.cornerRadius?.state === "missing"
                ? `<button data-id="${item.id}" data-target="cornerRadius" class="row-apply layer-button">Apply Corner Radius Token</button>`
                : "";
            const typoBtn =
              item.typography?.state === "missing"
                ? `<button data-id="${item.id}" data-target="typography" class="row-apply layer-button">Apply Typography Token</button>`
                : "";

            const buttons = `<div class="layer-card__buttons">${fillBtn}${strokeBtn}${paddingBtn}${gapBtn}${borderBtn}${radiusBtn}${typoBtn}</div>`;
            return `<div class="layer-card ${isCollapsed ? "is-collapsed" : ""}" data-id="${item.id}">
              <div class="layer-card__header">
                <div class="layer-card__title">${item.name || "Layer"}</div>
                <div class="layer-card__actions">${layerApply}${highlight}${toggle}</div>
              </div>
              <div class="layer-card__body">
                ${fillStatus || ""}
                ${strokeStatus || ""}
                ${paddingStatus || ""}
                ${gapStatus || ""}
                ${borderStatus || ""}
                ${radiusStatus || ""}
                ${typoStatus || ""}
                ${buttons}
              </div>
            </div>`;
          })
          .join("");
        listEl.innerHTML = rows;

        listEl.querySelectorAll(".layer-card__toggle").forEach((btn) => {
          btn.addEventListener("click", () => {
            const card = btn.closest(".layer-card");
            const id = btn.getAttribute("data-id");
            if (!card || !id) return;
            const isCollapsed = card.classList.toggle("is-collapsed");
            btn.setAttribute("aria-expanded", String(!isCollapsed));
            if (isCollapsed) {
              collapsedIds.add(id);
            } else {
              collapsedIds.delete(id);
            }
          });
        });

        listEl.querySelectorAll(".layer-apply").forEach((btn) => {
          btn.addEventListener("click", () => {
            if (btn.disabled) return;
            const id = btn.getAttribute("data-id");
            if (!id) return;
            suppressLoadingOnce = true;
            parent.postMessage(
              {
                pluginMessage: {
                  type: "apply-token-layer",
                  nodeId: id,
                  mode: getMode(),
                  libraryId: getLibraryId(),
                },
              },
              "*"
            );
          });
        });

        listEl.querySelectorAll(".row-apply").forEach((btn) => {
          btn.addEventListener("click", () => {
            if (btn.disabled) return;
            const id = btn.getAttribute("data-id");
            const target = btn.getAttribute("data-target") || "fill";
            suppressLoadingOnce = true;
            parent.postMessage(
              {
                pluginMessage: {
                  type: "apply-token",
                  nodeId: id,
                  target,
                  mode: getMode(),
                  libraryId: getLibraryId(),
                },
              },
              "*"
            );
          });
        });

        listEl.querySelectorAll(".row-highlight").forEach((btn) => {
          btn.addEventListener("mouseenter", () => {
            const id = btn.getAttribute("data-id");
            if (!id) return;
            parent.postMessage(
              { pluginMessage: { type: "highlight", nodeId: id, mode: getMode() } },
              "*"
            );
          });
          btn.addEventListener("mouseleave", () => {
            parent.postMessage({ pluginMessage: { type: "highlight-clear" } }, "*");
          });
        });
      };

      window.onmessage = (event) => {
        const data = event.data.pluginMessage;
        if (!data || data.type !== "status") return;
        const { title, message, state } = data.payload;
        const normalizedTitle = String(title).toLowerCase();
        const isScanComplete = normalizedTitle === "scan complete";
        const isApplyFailed = normalizedTitle.includes("apply failed");
        const wasApplyingAll = isApplyingAll;
        if (wasApplyingAll && !isScanComplete && !isApplyFailed) {
          return;
        }
        if (wasApplyingAll && (isScanComplete || isApplyFailed)) {
          isApplyingAll = false;
        }
        const displayTitle =
          wasApplyingAll && isScanComplete
            ? "Tokens Applied"
            : title === "Scan complete"
            ? "Scan Complete"
            : title;
        titleEl.textContent = displayTitle;
        messageEl.textContent = message;
        const hasCounts = updateSummaryCounts(message);
        if (messageEl) {
          const shouldHideMessage = Boolean(hasCounts) || !message;
          messageEl.classList.toggle("is-hidden", shouldHideMessage);
        }
        const normalizedDisplayTitle = String(displayTitle).toLowerCase();
        const isComplete =
          normalizedDisplayTitle === "scan complete" ||
          normalizedDisplayTitle === "tokens applied";
        const isScanning = normalizedDisplayTitle.startsWith("scanning");
        const isApplying = normalizedDisplayTitle.startsWith("applying");
        const isBusy = isScanning || isApplying;
        if (statusIconEl) {
          statusIconEl.classList.toggle("is-hidden", !isComplete);
        }
        if (statusSpinnerEl) {
          statusSpinnerEl.classList.toggle("is-hidden", !isBusy);
        }
        setStartScanLoading(isScanning);
        if (isScanning) {
          if (!suppressLoadingOnce) {
            setLoadingState(true);
          }
          suppressLoadingOnce = false;
        }
        cardEl?.classList.toggle(
          "success",
          state === "found" || state === "applied"
        );
      };

      window.addEventListener("message", (event) => {
        const data = event.data.pluginMessage;
        if (!data) return;
        if (data.type === "status") return; // handled above
        if (data.type === "selection-state") {
          const hasSelection = Boolean(data.payload?.hasSelection);
          setEmptyState(!hasSelection);
          setLoadingState(hasSelection);
          return;
        }
        if (data.type === "scan-results") {
          setLoadingState(false);
          suppressLoadingOnce = false;
          setEmptyState(Boolean(data.payload?.emptySelection));
          renderList(data.payload.items || []);
        }
        if (data.type === "libraries-options") {
          renderLibraryOptions(data.payload);
        }
        if (data.type === "library-error") {
          setLibraryError(data.payload?.message || "");
        }
      });

      refreshBtn?.addEventListener("click", () => {
        suppressLoadingOnce = true;
        if (titleEl) {
          titleEl.textContent = "Scanning";
        }
        if (statusIconEl) {
          statusIconEl.classList.add("is-hidden");
        }
        if (statusSpinnerEl) {
          statusSpinnerEl.classList.remove("is-hidden");
        }
        parent.postMessage(
          { pluginMessage: { type: "refresh", mode: getMode(), libraryId: getLibraryId() } },
          "*"
        );
      });

      startScanBtn?.addEventListener("click", () => {
        if (startScanBtn?.disabled) return;
        setLoadingState(true);
        setStartScanLoading(true);
        parent.postMessage(
          { pluginMessage: { type: "refresh", mode: getMode(), libraryId: getLibraryId() } },
          "*"
        );
      });

      applyAllBtn?.addEventListener("click", () => {
        suppressLoadingOnce = true;
        isApplyingAll = true;
        if (titleEl) {
          titleEl.textContent = "Applying, standby";
        }
        if (statusIconEl) {
          statusIconEl.classList.add("is-hidden");
        }
        if (statusSpinnerEl) {
          statusSpinnerEl.classList.remove("is-hidden");
        }
        parent.postMessage(
          {
            pluginMessage: {
              type: "apply-token-all",
              mode: getMode(),
              libraryId: getLibraryId(),
              fills: chkColor?.checked !== false,
              strokes: chkColor?.checked !== false,
              typography: chkTypography?.checked !== false,
              spacing: chkSpacing?.checked !== false,
            },
          },
          "*"
        );
      });

      themeSelect?.addEventListener("change", () => {
        updateDarkNote();
      });

      filterSelect?.addEventListener("change", () => {
        // Re-render with the current cached list; easiest is to trigger a refresh.
        suppressLoadingOnce = true;
        parent.postMessage(
          { pluginMessage: { type: "refresh", mode: getMode(), libraryId: getLibraryId() } },
          "*"
        );
      });

      librarySelect?.addEventListener("change", () => {
        suppressLoadingOnce = true;
        parent.postMessage(
          {
            pluginMessage: {
              type: "set-library",
              libraryId: getLibraryId(),
              mode: getMode(),
            },
          },
          "*"
        );
      });

      document.addEventListener("click", (event) => {
        if (!filterMenu || !filterMenu.hasAttribute("open")) return;
        if (!filterMenu.contains(event.target)) {
          filterMenu.removeAttribute("open");
        }
      });

      document.addEventListener("keydown", (event) => {
        if (event.key !== "Escape") return;
        if (filterMenu?.hasAttribute("open")) {
          filterMenu.removeAttribute("open");
        }
      });

      // Debug runs once at startup via plugin; no UI control needed.

      updateDarkNote();
      setEmptyState(true);
      setLoadingState(false);

      parent.postMessage({ pluginMessage: { type: "ui-ready" } }, "*");

      const sendSize = () => {
        parent.postMessage(
          {
            pluginMessage: {
              type: "ui-resized",
              width: window.innerWidth,
              height: window.innerHeight,
            },
          },
          "*"
        );
      };
      window.addEventListener("resize", sendSize);
    </script>
  </body>
</html>
